<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <body>
        <ui:composition template="./../template/template.xhtml">
            <ui:define name="content">
                <h:form id="frmCliente">
                    <p:messages globalOnly="true" id="messages" showDetail="true" autoUpdate="true" closable="true"/>
                    <article class="module width_full">
                        <header><h3> Listado de Clientes</h3></header>
                        <div class="module_content">
                            <p:tabView id="tbvcliente">
                                <p:tab title="Cliente">
                                    <center>
                                        <article class="module width_full">
                                            <header><center><h3>Datos de Cliente</h3></center></header>
                                            <div class="module_content">
                                                <h:panelGrid cellpadding="3" width="90%">
                                                    <p:dataTable id="tblroles" value="#{dtClientView.lstCliente}" var="item"
                                                                 selection="#{dtClientView.clientesel}" selectionMode="single" 
                                                                 rowKey="#{item.id}" paginator="true" paginatorPosition="bottom" rows="10" 
                                                                 rendered="true">
                                                        <p:column headerText="Nombre y Apellido"> 
                                                            <h:outputText value="#{item.nombre} #{item.apellido}" />
                                                        </p:column>
                                                        <p:column headerText="Sexo" width="70">
                                                            <h:outputText value="#{item.sexo}"/>
                                                        </p:column>
                                                        <p:column headerText="Edad" width="50">
                                                            <h:outputText value="#{item.edad}"/>
                                                        </p:column>
                                                        <p:column headerText="Fax" width="90">
                                                            <h:outputText value="#{item.fax}"/>
                                                        </p:column>
                                                        <p:column headerText="Email">
                                                            <h:outputText value="#{item.email}"/>
                                                        </p:column>
                                                        <p:column headerText="Estado Civil" width="90">
                                                            <h:outputText value="#{item.estadocivil}"/>
                                                        </p:column>

                                                        <f:facet name="footer">
                                                            <p:commandButton value="Ver" icon="ui-icon-circle-plus" action="#{dtClientView.cargarvercliente(dtClientView.clientesel.id)}"/>
                                                            <p:commandButton value="Editar" icon="ui-icon-pencil" actionListener="#{dtClienteView.loadcliente(dtClienteView.clientesel)}" />
                                                        </f:facet>
                                                    </p:dataTable>
                                                </h:panelGrid>
                                            </div>
                                        </article>
                                        <br/>
                                        <article>
                                            <center>
                                                <p:commandButton value="Guardar" update=":frmCliente" actionListener="#{dtClientView.register()}"/>
                                                <p:commandButton value="Cancelar" oncomplete="PF('newcliente').hide()"/>
                                            </center>
                                        </article>
                                    </center>
                                </p:tab>

                                <p:tab title="Identificación">
                                    <center>
                                        <h:form id="frmIdentificacion">
                                            <center>
                                                <h:panelGrid cellpadding="3" width="90%">
                                                    <p:dataTable id="tblidentificacion" value="#{dtIdentificacionView.identificacions}" var="item"
                                                                 selection="#{dtIdentificacionView.identificacionsel}" selectionMode="single" 
                                                                 rowKey="#{item.cltid}" paginator="true" paginatorPosition="bottom" rows="10" 
                                                                 rendered="true">

                                                        <p:column headerText="Tipo Identificacion" width="70">
                                                            <h:outputText value="#{item.tipoidenti.nombre}"/>
                                                        </p:column>
                                                        <p:column headerText="Numero" width="50">
                                                            <h:outputText value="#{item.numdescripcion}"/>
                                                        </p:column>
                                                        <p:column headerText="Estado" width="90">
                                                            <h:outputText value="#{item.estado}"/>
                                                        </p:column>



                                                        <f:facet name="footer">
                                                            <p:commandButton value="Ver" icon="ui-icon-circle-plus" action="#{dtClientView.update(cli)}" />
                                                            <p:commandButton value="Editar" icon="ui-icon-pencil" actionListener="#{dtIdentificacionView.loadidentificacion(dtIdentificacionView.identificacionsel)}" />
                                                            <p:commandButton id="delRegistro" value="Eliminar" icon="ui-icon-trash" update=":frmCliente:tbvcliente:frmIdentificacion:tblidentificacion" process="@this"
                                                                             actionListener="#{dtIdentificacionView.delete(dtIdentificacionView.identificacionsel)}"> 
                                                                <p:confirm header="Confirmación" message="¿Seguro desea eliminar el registro?" icon="ui-icon-alert" /> 
                                                            </p:commandButton> 
                                                        </f:facet>
                                                    </p:dataTable>
                                                </h:panelGrid>
                                            </center>
                                            <p:confirmDialog global="true">  
                                                <center>
                                                    <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>  
                                                    <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close"/>       
                                                </center>
                                            </p:confirmDialog>
                                        </h:form>
                                    </center>
                                </p:tab>
                                <p:tab title="Dirección">
                                    <center>
                                        <h:form id="frmDireccion">
                                            <center>
                                                <h:panelGrid cellpadding="3" width="100%">
                                                    <p:dataTable id="tblroles" value="#{dtDireccionView.direccions}" var="item"
                                                                 selection="#{dtDireccionView.direccionsel}" selectionMode="single" 
                                                                 rowKey="#{item.cltid}" paginator="true" paginatorPosition="bottom" rows="10" 
                                                                 rendered="true">


                                                        <p:column headerText="Tipo Direccion" width="60"> 
                                                            <h:outputText value="#{item.nomdireccion.nombre}" />
                                                        </p:column>
                                                        <p:column headerText="Ciudad" width="50"> 
                                                            <h:outputText value="#{item.nomcuidad.nombre}" />
                                                        </p:column>
                                                        <p:column headerText="Direccion" width="70">
                                                            <h:outputText value="#{item.calleprincipal} #{item.numcasa} #{item.callesecundaria}"/>
                                                        </p:column>
                                                        <p:column headerText="Parroquia" width="50">
                                                            <h:outputText value="#{item.parroquia}"/>
                                                        </p:column>
                                                        <p:column headerText="Referencia" width="60">
                                                            <h:outputText value="#{item.referencia}"/>
                                                        </p:column>

                                                        <f:facet name="footer">
                                                            <p:commandButton value="Nuevo" icon="ui-icon-circle-plus" oncomplete="PF('newdireccion').show()" />
                                                            <p:commandButton value="Editar" icon="ui-icon-pencil" actionListener="#{dtDireccionView.loaddireccion(dtDireccionView.direccionsel)}" />
                                                            <p:commandButton id="delRegistro" value="Eliminar" icon="ui-icon-trash" update=":frmCliente:tbvcliente:frmDireccion" 
                                                                             actionListener="#{dtDireccionView.delete(dtDireccionView.direccionsel)}"> 
                                                                <p:confirm header="Confirmación" message="¿Seguro desea eliminar el registro?" icon="ui-icon-alert" /> 
                                                            </p:commandButton> 
                                                        </f:facet>
                                                    </p:dataTable>
                                                </h:panelGrid>
                                            </center>
                                            <p:confirmDialog global="true">  
                                                <center>
                                                    <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>  
                                                    <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close"/>       
                                                </center>
                                            </p:confirmDialog>
                                        </h:form>
                                    </center>
                                </p:tab>
                                <p:tab title="Teléfono">
                                    <center>
                                        <h:form id="frmTelefono">
                                            <center>
                                                <h:panelGrid cellpadding="3" width="80%">
                                                    <p:dataTable id="tblroles" value="#{dtTelefonoView.telefonos}" var="item"
                                                                 selection="#{dtTelefonoView.telefonosel}" selectionMode="single" 
                                                                 rowKey="#{item.id}" paginator="true" paginatorPosition="bottom" rows="10" 
                                                                 rendered="true">
                                                        <p:column headerText="Tipo de Telefono" width="90">
                                                            <h:outputText value="#{item.nombrettf.nombre}"/>
                                                        </p:column>
                                                        <p:column headerText="Numero" width="100">
                                                            <h:outputText value="#{item.numero}"/>
                                                        </p:column>
                                                        <p:column headerText="Operadora" width="100">
                                                            <h:outputText value="#{item.operadora}"/>
                                                        </p:column>
                                                        <p:column headerText="Estado" width="70">
                                                            <h:outputText value="#{item.estado}"/>
                                                        </p:column>


                                                        <f:facet name="footer">
                                                            <p:commandButton value="Nuevo" icon="ui-icon-circle-plus" oncomplete="PF('newtelefono').show()" />
                                                            <p:commandButton value="Editar" icon="ui-icon-pencil" actionListener="#{dtTelefonoView.loadtelefono(dtTelefonoView.telefonosel)}" />
                                                            <p:commandButton id="delRegistro" value="Eliminar" icon="ui-icon-trash" update=":frmCliente:tbvcliente:frmTelefono" 
                                                                             actionListener="#{dtTelefonoView.delete(dtTelefonoView.telefonosel)}"> 
                                                                <p:confirm header="Confirmación" message="¿Seguro desea eliminar el registro?" icon="ui-icon-alert" /> 
                                                            </p:commandButton> 
                                                        </f:facet>
                                                    </p:dataTable>
                                                </h:panelGrid>
                                            </center>
                                            <p:confirmDialog global="true">  
                                                <center>
                                                    <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>  
                                                    <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close"/>       
                                                </center>
                                            </p:confirmDialog>
                                        </h:form>
                                    </center>
                                </p:tab>
                            </p:tabView>
                        </div>
                        <footer> 
                        </footer>
                    </article>
                </h:form> 
                <!-- Popup para Ver los datos de Cliente -->
                <h:form id="frmVerCliente">
                    <p:dialog id="veruser" widgetVar="vercliente" header="Cliente" modal="true" resizable="false">
                        <article class="module width_full">
                            <header><center><h3>Información de Cliente</h3></center></header>
                            <div class="module_content">
                                <h:panelGrid id="panelVerCliente" columns="8" width="60%">
                                    <h:outputText value="Nombre:"/>
                                    <h:inputText value="#{dtClientView.clientesel.nombre}" disabled="#{dtClientView.clientesel != 'nombre'}"/>
                                    <h:outputText value="Apellido:"/>
                                    <h:inputText value="#{dtClientView.clientesel.apellido}" disabled="#{dtClientView.clientesel != 'apellido'}"/>
                                    <h:outputText value="Sexo:"/>
                                    <h:inputText value="#{dtClientView.clientesel.sexo}" disabled="#{dtClientView.clientesel != 'sexo'}"/>
                                    <h:outputText value="Edad:"/>
                                    <h:inputText value="#{dtClientView.clientesel.edad}" disabled="#{dtClientView.clientesel != 'edad'}"/>
                                    <h:outputText value="Fax:"/>
                                    <h:inputText value="#{dtClientView.clientesel.fax}" disabled="#{dtClientView.clientesel != 'fax'}"/>
                                    <h:outputText value="Email:"/>
                                    <h:inputText value="#{dtClientView.clientesel.email}" disabled="#{dtClientView.clientesel != 'email'}"/>
                                    <h:outputText value="Estado Civil:"/>
                                    <h:inputText value="#{dtClientView.clientesel.estadocivil}" disabled="#{dtClientView.clientesel != 'estadocivil'}"/>

                                </h:panelGrid>
                            </div>
                        </article>

                        <article class="module width_full">
                            <header><center><h3>Identificación de Cliente</h3></center></header>
                            <div class="module_content">

                                <p:selectManyMenu id="lista" value="#{dtClientView.selecidentificacion}"  converter="javax.faces.Integer" style="width: 500px"
                                                  filterMatchMode="contains" showCheckbox="false">
                                    <f:selectItems value="#{dtClientView.lstIdentificacion}" var="client" 
                                                   itemLabel=" #{client.tipoidenti.nombre}" 
                                                   itemValue="#{client.cltid}" /> 
                                </p:selectManyMenu>
                                <h:panelGrid id="panelVerIdent" columns="8" width="60%">
                                    <h:outputText value="Tipo de Identificación:"/>
                                    <h:inputText value="#{dtClientView.identificacionsel.tipoidenti.nombre}" disabled="#{dtClientView.identificacionsel != 'nombre'}"/>
                                    <h:outputText value="Numero:"/>
                                    <h:inputText value="#{dtClientView.identificacionsel.numdescripcion}" disabled="#{dtClientView.identificacionsel != 'numdescripcion'}"/>
                                    <h:outputText value="Estado:"/>
                                    <h:inputText value="#{dtClientView.identificacionsel.estado}" disabled="#{dtClientView.identificacionsel != 'estado'}"/>
                                </h:panelGrid>
                            </div>
                        </article>
                        <article class="module width_full">
                            <header><center><h3>Dirección del Cliente</h3></center></header>
                            <div class="module_content">
                                <p:selectManyMenu id="listaDirec" value="#{dtClientView.selecdireccion}"  converter="javax.faces.Integer" style="width: 500px"
                                                  filterMatchMode="contains" showCheckbox="false">
                                    <f:selectItems value="#{dtClientView.lstDireccion}" var="direc" 
                                                   itemLabel=" #{direc.nomdireccion.nombre}" 
                                                   itemValue="#{direc.cltid}" /> 
                                </p:selectManyMenu>
                                <h:panelGrid id="panelVerDirecc" columns="8" width="60%">
                                    <h:outputText value="Tipo Dirección:"/>
                                    <h:inputText value="#{dtClientView.direccionsel.nomdireccion.nombre}" disabled="#{dtClientView.direccionsel != 'nombre'}"/>
                                    <h:outputText value="País:"/>
                                    <h:inputText value="#{dtClientView.direccionsel.nomcuidad.nombreprv.nombrepis.nombre}" disabled="#{dtClientView.direccionsel != 'nombre'}"/>
                                    <h:outputText value="Provincia:"/>
                                    <h:inputText value="#{dtClientView.direccionsel.nomcuidad.nombreprv.nombre}" disabled="#{dtClientView.direccionsel != 'nombre'}"/>
                                    <h:outputText value="Ciudad:"/>
                                    <h:inputText value="#{dtClientView.direccionsel.nomcuidad.nombre}" disabled="#{dtClientView.direccionsel != 'nombre'}"/>
                                    <h:outputText value="Calle Principal:"/>
                                    <h:inputText value="#{dtClientView.direccionsel.calleprincipal}" disabled="#{dtClientView.direccionsel != 'calleprincipal'}"/>
                                    <h:outputText value="Calle Secundaria:"/>
                                    <h:inputText value="#{dtClientView.direccionsel.callesecundaria}" disabled="#{dtClientView.direccionsel != 'callesecundaria'}"/>
                                    <h:outputText value="Número de Casa:"/>
                                    <h:inputText value="#{dtClientView.direccionsel.numcasa}" disabled="#{dtClientView.direccionsel != 'numcasa'}"/>
                                    <h:outputText value="Parroquia:"/>
                                    <h:inputText value="#{dtClientView.direccionsel.parroquia}" disabled="#{dtClientView.direccionsel != 'parroquia'}"/>
                                    <h:outputText value="Referencia:"/>
                                    <h:inputText value="#{dtClientView.direccionsel.referencia}" disabled="#{dtClientView.direccionsel != 'referencia'}"/>
                                    <h:outputText value="Barrio:"/>
                                    <h:inputText value="#{dtClientView.direccionsel.barrio}" disabled="#{dtClientView.direccionsel != 'barrio'}"/>
                                    <h:outputText value="Sector:"/>
                                    <h:inputText value="#{dtClientView.direccionsel.sector}" disabled="#{dtClientView.direccionsel != 'sector'}"/>
                                </h:panelGrid>
                            </div>
                        </article>
                        <article class="module width_full">
                            <header><center><h3>Teléfono del Cliente</h3></center></header>
                            <div class="module_content">
                                <p:selectManyMenu id="listaTelf" value="#{dtClientView.selectelefono}"  converter="javax.faces.Integer" style="width: 500px"
                                                  filterMatchMode="contains" showCheckbox="false">
                                    <f:selectItems value="#{dtClientView.lstTelefono}" var="telf" 
                                                   itemLabel=" #{telf.nombrettf.nombre}" 
                                                   itemValue="#{telf.cltid}" /> 
                                </p:selectManyMenu>
                                <h:panelGrid id="panelVerTelf" columns="8" width="60%">
                                    <h:outputText value="Tipo Teléfono:"/>
                                    <h:inputText value="#{dtClientView.telefonosel.nombrettf.nombre}" disabled="#{dtClientView.direccionsel != 'nombre'}"/>
                                    <h:outputText value="Número:"/>
                                    <h:inputText value="#{dtClientView.telefonosel.numero}" disabled="#{dtClientView.direccionsel != 'numero'}"/>
                                    <h:outputText value="Operadora:"/>
                                    <h:inputText value="#{dtClientView.telefonosel.operadora}" disabled="#{dtClientView.direccionsel != 'operadora'}"/>
                                    <h:outputText value="Estado:"/>
                                    <h:inputText value="#{dtClientView.telefonosel.estado}" disabled="#{dtClientView.direccionsel != 'estado'}"/>

                                </h:panelGrid>
                            </div>
                        </article>
                        <br/>
                        <article>
                            <center>
                                <p:commandButton value="Cerrar" oncomplete="PF('vercliente').hide()" />
                            </center>
                        </article>
                    </p:dialog>
                </h:form>
            </ui:define>
        </ui:composition>
    </body>
</html>
