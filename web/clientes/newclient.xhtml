<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <body>
        <ui:composition template="./../template/template.xhtml">
            <ui:define name="content">
                <h:form id="frmCliente">
                    <p:messages globalOnly="true" id="messages" showDetail="true" autoUpdate="true" closable="true"/>
                    <article class="module width_full">
                        <header><h3> Gestion de Clientes</h3></header>
                        <div class="module_content">
                            <p:tabView id="tbvcliente">
                                <p:tab title="Cliente">
                                    <center>
                                        <article class="module width_full">
                                            <header><center><h3>Datos de Cliente</h3></center></header>
                                            <div class="module_content">
                                                <h:panelGrid columns="4" cellpadding="4" width="80%">
                                                    <h:outputText value="Nombre:" />
                                                    <h:inputText value="#{dtClientView.cliente.nombre}" />
                                                    <h:outputText value="Apellido:" />
                                                    <h:inputText value="#{dtClientView.cliente.apellido}" />
                                                    <h:outputText value="Sexo:"/>
                                                    <p:selectOneMenu value="#{dtClientView.cliente.sexo}">
                                                        <f:selectItem itemLabel="Elija una opción" itemValue="#{-1}"/>
                                                        <f:selectItem itemLabel="Femenino" itemValue="Femenino"/>
                                                        <f:selectItem itemLabel="Masculino" itemValue="Masculino"/>
                                                    </p:selectOneMenu>
                                                    <h:outputText value="Edad:" />
                                                    <h:inputText value="#{dtClientView.cliente.edad}" />
                                                    <h:outputText value="Fax:" />
                                                    <h:inputText value="#{dtClientView.cliente.fax}" />
                                                    <h:outputText value="Email:" />
                                                    <h:inputText value="#{dtClientView.cliente.email}" />
                                                    <h:outputText value="Estado Civil:"/>
                                                    <p:selectOneMenu value="#{dtClientView.cliente.estadocivil}">
                                                        <f:selectItem itemLabel="Elija una opción" itemValue="-1"/>
                                                        <f:selectItem itemLabel="Soltero/a" itemValue="Soltero/a"/>
                                                        <f:selectItem itemLabel="Casado/a" itemValue="Casado/a"/>
                                                        <f:selectItem itemLabel="Divorciado/a" itemValue="Divorciado/a"/>
                                                        <f:selectItem itemLabel="Viudo/a" itemValue="Viudo/a"/>
                                                        <f:selectItem itemLabel="Union Libre" itemValue="Union Libre"/>
                                                    </p:selectOneMenu>
                                                </h:panelGrid>
                                            </div>
                                        </article>
                                        <br/>
                                        <article>
                                            <center>
                                                <p:commandButton value="Guardar" update=":frmCliente" actionListener="#{dtClientView.register()}" action="#{dtClientView.limpiarlistas()}"/>
                                                <p:commandButton value="Cancelar" oncomplete="PF('newcliente').hide()"/>
                                            </center>
                                        </article>
                                    </center>
                                </p:tab>

                                <p:tab title="Identificación">
                                    <center>
                                        <h:form id="frmIdentificacion">
                                            <article class="module width_full">
                                                <header><center><h3>Datos de Identificación</h3></center></header>
                                                <div class="module_content">
                                                    <h:panelGrid columns="2" cellpadding="4" width="80%">
                                                        <h:outputText value="Tipo Identidad"/>
                                                        <p:selectOneMenu value="#{dtClientView.identidad.tidid}">
                                                            <f:selectItem itemLabel="Elija una opcion" itemValue="#{-1}"/>
                                                            <f:selectItems value="#{dtClientView.lsttipoidentidad}" var="tipoidentidad" itemValue="#{tipoidentidad.id}"
                                                                           itemLabel="#{tipoidentidad.nombre} "/>
                                                            <p:ajax event="change"/>
                                                        </p:selectOneMenu>
                                                        <h:outputText value="Numero:" />
                                                        <h:inputText value="#{dtClientView.identidad.numdescripcion}"  >
                                                            <p:ajax event="change"/>

                                                        </h:inputText>
                                                        <h:outputText value="Estado:"/>
                                                        <p:selectOneMenu value="#{dtClientView.identidad.estado}">
                                                            <f:selectItem itemLabel="Elija una opción" itemValue="#{-1}"/>
                                                            <f:selectItem itemLabel="Activo" itemValue="Activo"/>
                                                            <f:selectItem itemLabel="Inactivo" itemValue="Inactivo"/>
                                                            <p:ajax event="change"/>
                                                        </p:selectOneMenu>
                                                    </h:panelGrid>
                                                </div>
                                            </article>
                                            <br/>
                                            <br/>
                                            <article>
                                                <center>
                                                    <p:commandButton value="Aceptar" update=":frmCliente:tbvcliente:frmIdentificacion:tblidentificacion" process="@this" action="#{dtClientView.addIdentificacionToList()}" />

                                                    <p:commandButton value="Cancelar" oncomplete="PF('newidentificacion').hide()" />
                                                </center>
                                            </article>
                                            <br/>
                                            <br/>
                                            <p:dataTable id="tblidentificacion" value="#{dtClientView.lstIdentificacion}" var="item"
                                                         selection="#{dtClientView.identidad}" selectionMode="single" 
                                                         rowKey="#{item.tidid}" paginator="true" paginatorPosition="bottom" rows="10" 
                                                         rendered="true">

                                                <p:column headerText="Tipo Identificacion" width="70">
                                                    <h:outputText value="#{item.tipoidenti.nombre}"/>
                                                </p:column>
                                                <p:column headerText="Numero" width="50">
                                                    <h:outputText value="#{item.numdescripcion}"/>
                                                </p:column>
                                                <p:column headerText="Estado" width="90">
                                                    <h:outputText value="#{item.estado}"/>
                                                </p:column>
                                                
                                                <f:facet name="footer">
                                                    <p:commandButton id="EliminarRegistro" value="Eliminar" icon="ui-icon-trash" update=":frmCliente" 
                                                                     action="#{dtClientView.delete(dtClientView.identificacionsel.tidid)}"> 
                                                        <p:confirm header="Confirmación" message="¿Seguro desea eliminar el registro?" icon="ui-icon-alert" /> 
                                                    </p:commandButton> 
                                                </f:facet>

                                            </p:dataTable>

                                        </h:form>
                                        <p:confirmDialog global="true">  
                                            <center>
                                                <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>  
                                                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close"/>       
                                            </center>
                                        </p:confirmDialog>
                                    </center>
                                </p:tab>
                                <p:tab title="Dirección">
                                    <center>
                                        <h:form id="frmNuevoDireccion">
                                            <article class="module width_full">
                                                <header><center><h3>Datos de Dirección</h3></center></header>
                                                <div class="module_content">
                                                    <h:panelGrid columns="4" cellpadding="4" width="80%">
                                                        <h:outputText value="Tipo Dirección"/>
                                                        <p:selectOneMenu value="#{dtClientView.direccion.tdrid}">
                                                            <f:selectItem itemLabel="Elija una opcion" itemValue="#{-1}"/>
                                                            <f:selectItems value="#{dtClientView.lsttipodireccion}" var="tipodireccion" itemValue="#{tipodireccion.id}"
                                                                           itemLabel="#{tipodireccion.nombre} "/>
                                                            <p:ajax event="change"/>
                                                        </p:selectOneMenu>
                                                        <h:outputText value="País"/>
                                                        <p:selectOneMenu value="#{dtClientView.selectpais}">
                                                            <f:selectItem itemLabel="Elija una Pais" itemValue="#{-1}"/>
                                                            <f:selectItems value="#{dtClientView.lstPais}" var="pais" itemValue="#{pais.nombre}"
                                                                           itemLabel="#{pais.nombre} "/>
                                                            <p:ajax event="change" listener="#{dtClientView.cargarprovincias()}" update="provi"/>
                                                        </p:selectOneMenu>

                                                        <h:outputText value="Provincia"/>
                                                        <p:selectOneMenu id="provi" value="#{dtClientView.selectprovincia}">                                
                                                            <f:selectItem itemLabel="Elija una Provincia" itemValue="#{-1}"/>
                                                            <f:selectItems value="#{dtClientView.lstProvincia}" var="provincia" itemValue="#{provincia.nombre}"
                                                                           itemLabel="#{provincia.nombre} "/>
                                                            <p:ajax event="change" listener="#{dtClientView.cargarcuidades()}" update="ciu"/>
                                                        </p:selectOneMenu>
                                                        <h:outputText value="Ciudad"/>
                                                        <p:selectOneMenu id="ciu" value="#{dtClientView.direccion.cidid}">
                                                            <f:selectItem itemLabel="Elija una opcion" itemValue="#{-1}"/>
                                                            <f:selectItems value="#{dtClientView.lstCiudad}" var="ciudad" itemValue="#{ciudad.id}"
                                                                           itemLabel="#{ciudad.nombre} "/>
                                                            <p:ajax event="change"/>
                                                        </p:selectOneMenu>   
                                                        <h:outputText value="Calle Principal:" />
                                                        <h:inputText value="#{dtClientView.direccion.calleprincipal}" >
                                                            <p:ajax event="change"/>
                                                        </h:inputText>
                                                        <h:outputText value="Calle Secundaria:" />
                                                        <h:inputText value="#{dtClientView.direccion.callesecundaria}" >
                                                            <p:ajax event="change"/>
                                                        </h:inputText>
                                                        <h:outputText value="Número de Casa:" />
                                                        <h:inputText value="#{dtClientView.direccion.numcasa}" >
                                                            <p:ajax event="change"/>
                                                        </h:inputText>
                                                        <h:outputText value="Parroquia:" />
                                                        <h:inputText value="#{dtClientView.direccion.parroquia}" >
                                                            <p:ajax event="change"/>
                                                        </h:inputText>
                                                        <h:outputText value="Referencia:" />
                                                        <h:inputText value="#{dtClientView.direccion.referencia}">
                                                            <p:ajax event="change"/>
                                                        </h:inputText>
                                                        <h:outputText value="Barrio:" />
                                                        <h:inputText value="#{dtClientView.direccion.barrio}">
                                                            <p:ajax event="change"/>
                                                        </h:inputText>
                                                        <h:outputText value="Sector:" />
                                                        <h:inputText value="#{dtClientView.direccion.sector}" >
                                                            <p:ajax event="change"/>
                                                        </h:inputText>

                                                    </h:panelGrid>
                                                </div>
                                            </article>
                                            <br/>
                                            <br/>
                                            <article>
                                                <center>
                                                    <p:commandButton value="Aceptar" update=":frmCliente:tbvcliente:frmNuevoDireccion:tbldireccion :frmCliente:tbvcliente:frmNuevoDireccion" process="@this" action="#{dtClientView.addDireccionToList()}" />

                                                    <p:commandButton value="Cancelar" oncomplete="PF('newidentificacion').hide()" />
                                                </center>
                                            </article>
                                            <br/>
                                            <br/>

                                            <p:dataTable id="tbldireccion" value="#{dtClientView.lstDireccion}" var="item"
                                                         selection="#{dtClientView.direccion}" selectionMode="single" 
                                                         rowKey="#{item.tdrid}" paginator="true" paginatorPosition="bottom" rows="10" 
                                                         rendered="true">

                                                <p:column headerText="Tipo Direccion" width="100"> 
                                                    <h:outputText value="#{item.nomdireccion.nombre}" />
                                                </p:column>
                                                <p:column headerText="Ciudad" width="100"> 
                                                    <h:outputText value="#{item.nomcuidad.nombre}" />
                                                </p:column>
                                                <p:column headerText="Calle Principal" width="70">
                                                    <h:outputText value="#{item.calleprincipal}"/>
                                                </p:column>
                                                <p:column headerText="Calle secundaria" width="70">
                                                    <h:outputText value="#{item.callesecundaria}"/>
                                                </p:column>
                                                <p:column headerText="Numero de Casa" width="70">
                                                    <h:outputText value="#{item.numcasa}"/>
                                                </p:column>
                                                <p:column headerText="Parroquia" width="90">
                                                    <h:outputText value="#{item.parroquia}"/>
                                                </p:column>
                                                <p:column headerText="Referencia" width="90">
                                                    <h:outputText value="#{item.referencia}"/>
                                                </p:column>
                                                <p:column headerText="Barrio" width="90">
                                                    <h:outputText value="#{item.barrio}"/>
                                                </p:column>
                                                <p:column headerText="Sector" width="90">
                                                    <h:outputText value="#{item.sector}"/>
                                                </p:column>
                                            </p:dataTable>
                                        </h:form>
                                    </center>
                                </p:tab>
                                <p:tab title="Teléfono">
                                    <center>
                                        <h:form id="frmNuevoTelefono">
                                            <article class="module width_full">
                                                <header><center><h3>Datos de Teléfono</h3></center></header>
                                                <div class="module_content">
                                                    <h:panelGrid columns="4" cellpadding="4" width="80%">

                                                        <h:outputText value="Tipo Teléfono"/>
                                                        <p:selectOneMenu value="#{dtClientView.telefono.ttfid}">
                                                            <f:selectItem itemLabel="Elija un Tipo Telefono" itemValue="-1"/>
                                                            <f:selectItems value="#{dtClientView.lsttipotelefono}" var="tipotelefono" itemValue="#{tipotelefono.id}"
                                                                           itemLabel="#{tipotelefono.nombre} "/>
                                                            <p:ajax event="change"/>
                                                        </p:selectOneMenu>
                                                        <h:outputText value="Número:" />
                                                        <h:inputText value="#{dtClientView.telefono.numero}">
                                                            <p:ajax event="change"/>
                                                        </h:inputText>
                                                        <h:outputText value="Operadora:"/>
                                                        <p:selectOneMenu value="#{dtClientView.telefono.operadora}">
                                                            <f:selectItem itemLabel="Elija una opción" itemValue="-1"/>
                                                            <f:selectItem itemLabel="Claro" itemValue="Claro"/>
                                                            <f:selectItem itemLabel="CNT" itemValue="CNT"/>
                                                            <f:selectItem itemLabel="Movistar" itemValue="Movistar"/>
                                                            <p:ajax event="change"/>
                                                        </p:selectOneMenu>
                                                        <h:outputText value="Estado:"/>
                                                        <p:selectOneMenu value="#{dtClientView.telefono.estado}">
                                                            <f:selectItem itemLabel="Elija una opción" itemValue="-1"/>
                                                            <f:selectItem itemLabel="Activo" itemValue="Activo"/>
                                                            <f:selectItem itemLabel="Inactivo" itemValue="Inactivo"/>
                                                            <p:ajax event="change"/>
                                                        </p:selectOneMenu>

                                                    </h:panelGrid>
                                                </div>
                                            </article>
                                            <br/>
                                            <article>
                                                <center>
                                                    <p:commandButton value="Aceptar" update=":frmCliente:tbvcliente:frmNuevoTelefono:tbltelefono :frmCliente:tbvcliente:frmNuevoTelefono"  process="@this" action="#{dtClientView.addTelefonoToList()}" />
                                                    <p:commandButton value="Cancelar" oncomplete="PF('newtelefono').hide()" />
                                                </center>
                                            </article>
                                            <br/>
                                            <br/>
                                            <p:dataTable id="tbltelefono" value="#{dtClientView.lstTelefono}" var="item"
                                                         selection="#{dtClientView.telefono}" selectionMode="single" 
                                                         rowKey="#{item.id}" paginator="true" paginatorPosition="bottom" rows="10" 
                                                         rendered="true">

                                                <p:column headerText="Tipo de Telefono" width="90">
                                                    <h:outputText value="#{item.nombrettf.nombre}"/>
                                                </p:column>
                                                <p:column headerText="Numero" width="100">
                                                    <h:outputText value="#{item.numero}"/>
                                                </p:column>
                                                <p:column headerText="Operadora" width="100">
                                                    <h:outputText value="#{item.operadora}"/>
                                                </p:column>
                                                <p:column headerText="Estado" width="70">
                                                    <h:outputText value="#{item.estado}"/>
                                                </p:column>


                                            </p:dataTable>
                                        </h:form>
                                    </center>
                                </p:tab>
                            </p:tabView>
                        </div>
                        <footer> 
                        </footer>
                    </article>
                </h:form> 
            </ui:define>
        </ui:composition>
    </body>
</html>
